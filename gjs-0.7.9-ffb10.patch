Based on http://git.gnome.org/browse/gjs/commit/?id=950d000d94cef63496747119e7822f9978088864

diff -up gjs-0.7.9/gjs/jsapi-util.c.ffb10 gjs-0.7.9/gjs/jsapi-util.c
--- gjs-0.7.9/gjs/jsapi-util.c.ffb10	2011-01-25 01:05:34.013344556 -0800
+++ gjs-0.7.9/gjs/jsapi-util.c	2011-01-25 01:06:20.121768121 -0800
@@ -255,7 +255,7 @@ gjs_init_context_standard (JSContext    
 {
     JSObject *global;
 #ifdef HAVE_MOZJS_2
-    global = JS_NewGlobalObject(context, &global_class);
+    global = JS_NewCompartmentAndGlobalObject(context, &global_class, NULL);
     if (global == NULL)
         return FALSE;
 #else
